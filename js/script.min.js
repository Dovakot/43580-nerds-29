"use strict";const slider=document.querySelector(".slider"),buttonOpenModal=document.querySelector(".contacts__link"),modal=document.querySelector(".modal"),buttonCloseModal=modal.querySelector(".modal__button"),modalForm=modal.querySelector(".modal-form"),modalListFilds=modalForm.querySelectorAll(".modal-form__field"),storage=localStorage,mapLink=document.querySelector(".contacts__map-link"),mapIframe=document.querySelector(".contacts__map-frame");if(mapIframe.classList.remove("contacts__map-frame--hide"),mapLink.remove(),slider){const e=slider.querySelectorAll(".slider__item"),t=slider.querySelectorAll(".slider__control-button"),o=function(e,t){e.addEventListener("click",function(){if(e.classList.contains("slider__control-button--current"))return!1;const o=slider.querySelector(".slider__item--current"),l=slider.querySelector(".slider__control-button--current");o.classList.remove("slider__item--current"),l.classList.remove("slider__control-button--current"),t.classList.add("slider__item--current"),e.classList.add("slider__control-button--current")})};for(let l=0;l<e.length;l++)o(t[l],e[l])}const closeModal=function(){document.body.classList.remove("modal-show"),modal.classList.remove("modal--show"),(modalForm.querySelector(".modal-form__field--invalid")||modal).classList.remove("modal-form__field--invalid")},checkEmptyFields=function(e){for(let t of e)if(!t.value&&"TEXTAREA"!==t.tagName)return t.classList.remove("modal-form__field--invalid"),t.offsetWidth,t.classList.add("modal-form__field--invalid"),t.focus(),!0;return!1},saveDataToStorage=function(e){for(let t of e)if("TEXTAREA"!==t.tagName){const e=t.getAttribute("name");storage.setItem(e,t.value)}},writeDataToFields=function(e){let t=null;for(let o of e){if(o.removeAttribute("required"),storage){const e=o.getAttribute("name"),t=storage.getItem(e);t&&(o.value=t)}t||o.value||(t=o)}return t||e[0]};buttonOpenModal.addEventListener("click",function(e){e.preventDefault(),modalForm.reset();const t=writeDataToFields(modalListFilds);document.body.classList.add("modal-show"),modal.classList.add("modal--show"),t.focus()}),modalForm.addEventListener("submit",function(e){checkEmptyFields(modalListFilds)?e.preventDefault():storage&&saveDataToStorage(modalListFilds)}),buttonCloseModal.addEventListener("click",function(e){e.preventDefault(),closeModal()}),window.addEventListener("keydown",function(e){27===e.keyCode&&modal.classList.contains("modal--show")&&(e.preventDefault(),closeModal())});
